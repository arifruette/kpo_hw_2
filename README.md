# Отчет по реализации модуля «Учет финансов»

## Общая идея решения

Реализовано **консольное приложение на Kotlin** для учета личных финансов.
Приложение демонстрирует принципы **чистой архитектуры**, **SOLID**, **GRASP** и применение **паттернов GoF**.

### Основной функционал

* **Управление счетами, категориями и операциями** (создание, редактирование, удаление).
* **Импорт и экспорт данных** в форматах CSV, JSON и XML.
* **Сбор статистики выполнения** команд (замер времени).

### Архитектура

* `domain` — бизнес-логика, интерфейсы, паттерны и модель предметной области.
* `data` — реализации интерфейсов, фабрики, репозитории и обработчики файлов.
* `presentation` — консольный интерфейс и навигация по страницам.
* `di` — связывание зависимостей через Dagger 2 (фреймворк для кодгена di контейнера)

---

## Принципы SOLID и GRASP

### SOLID

**1. SRP (Single Responsibility)**
Каждый класс отвечает только за одну задачу:

* `CsvImporter` — парсинг CSV.
* `BankAccountFacadeImpl` — операции со счетами.
* `StatisticReporterImpl` — сбор статистики.

**2. OCP (Open/Closed)**
Добавление новых форматов импорта или экспорта не требует изменения существующих классов.
Например, достаточно создать новый наследник `FileImporter` или `Visitor`.

**3. LSP (Liskov Substitution)**
Любая реализация интерфейсов (`Repository`, `Visitor`, `Command`) может заменять другую без нарушения логики.

**4. ISP (Interface Segregation)**
Интерфейсы разделены по назначению —
`UserInteractionAgent`, `Repository<T>`, `Visitor`, `StatisticReporter` и др.

**5. DIP (Dependency Inversion)**
Классы работают с абстракциями, а не с реализациями.
Например, `CreateOperationCommand` использует `BankAccountFacade`, не зная о `BankAccountFacadeImpl`.

---

### GRASP

**1. High Cohesion (Высокая связность)**
Каждый компонент системы выполняет логически единую и компактную роль:

* `BankAccountRepositoryImpl` работает только с банковскими счетами.
* `BaseExportCommand` отвечает только за экспорт.
* `FileImporter` описывает общий шаблон импорта данных.
  Благодаря этому код легче поддерживать и расширять.

**2. Low Coupling (Слабая связанность)**
* Достигнут через зависимости от абстракций (интерфейсов Command, Visitor, Facade) вместо конкретных реализаций. 
* Использование Dagger 2 для dependency injection и четкое разделение на слои минимизирует прямые связи между компонентами, делая систему гибкой и легко изменяемой.
---

## Реализованные паттерны GoF

**Фасад (Facade)**

* `BankAccountFacadeImpl`, `CategoryFacadeImpl`, `OperationFacadeImpl`
* Объединяет работу фабрик и репозиториев, предоставляя простой интерфейс для управления данными.

**Команда (Command)**

* `CreateBankAccountCommand`, `CreateOperationCommand`, `BaseExportCommand`
* Инкапсулирует действия пользователя в виде объектов, что упрощает расширение и декорирование команд.

**Декоратор (Decorator)**

* `TimeComputingCommandDecorator`
* Добавляет измерение времени выполнения команды, не изменяя её внутреннюю реализацию.

**Шаблонный метод (Template Method)**

* `FileImporter`, `CsvImporter`
* Определяет общий процесс импорта данных (чтение, парсинг, сохранение), делегируя конкретные шаги подклассам.

**Посетитель (Visitor)**

* `Visitor`, `BaseElement`, `BaseExportCommand`
* Позволяет добавлять новые способы экспорта данных (CSV, JSON, XML) без изменения существующих фасадов.

**Фабрика (Factory)**

* `BankAccountFactoryImpl`, `CategoryFactoryImpl`, `OperationFactoryImpl`
* Централизует создание доменных объектов и проверку входных данных.

**Адаптер (Adapter)**

* `XmlToJsonAdapter`
* Конвертирует XML в JSON, обеспечивая совместимость между форматами импорта.

**Строитель (Builder)**

* `ImportConfig.Builder`
* Позволяет поэтапно собирать конфигурацию импорта файлов без сложных конструкторов.

---

## Инструкция по запуску

1. Открыть проект в **IntelliJ IDEA**.
2. Запустить точку входа `Main.kt`.
3. В консоли доступны действия:
    * управление счетами, категориями и операциями;
    * импорт и экспорт данных;
    * просмотр статистики выполнения команд.
4. Файлы для импорта расположены в папке `sample/`.

---

## Итог

Модуль реализует полную функциональность учета финансов,
следует принципам **SOLID** и **GRASP**,
и демонстрирует применение **основных паттернов GoF**.
Архитектура модульная, легко расширяется и готова к интеграции с внешними источниками данных или UI.